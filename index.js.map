{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst baseUrl = 'https://pixabay.com/api/';\nconst key = '46672316-334fc4a904d955c3d11f52bb4';\nconst imageType = 'photo';\nconst safesearch = true;\nconst orientation = 'horizontal';\nconst perPage = 'horizontal';\n\nexport const search = async (words, page = 1) => {\n  try {\n    const params = new URLSearchParams({\n      key,\n      safesearch,\n      orientation,\n      q: words,\n      image_type: imageType,\n      per_page: perPage,\n      page: page,\n    });\n\n    const { data } = await axios.get(`${baseUrl}?${params.toString()}`);\n    \n    return data.hits;\n  } catch (error) {\n    console.error(`Serch is failed with words: \"${words}\"`, error);\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst $gallery = document.querySelector('.gallery');\n\nexport const showLoading = () => {\n  $gallery.innerHTML = '<p id=\"loading\">Loading...</p>';\n};\n\nexport const clearLoading = () => {\n  $gallery.innerHTML = '';\n};\n\nexport const renderImages = (images, isNew = true) => {\n  if (isNew) $gallery.innerHTML = '';\n\n  if (images.length === 0) {\n    iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <div class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\"/>\n        </a>\n        <div class=\"gallery-info\">\n          <p><strong>Likes</strong> ${likes}</p>\n          <p><strong>Views</strong> ${views}</p>\n          <p><strong>Comments</strong> ${comments}</p>\n          <p><strong>Downloads</strong> ${downloads}</p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n\n  $gallery.innerHTML += markup;\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n};","import * as api from './js/pixabay-api';\nimport * as render from './js/render-functions';\n\nconst $searchForm = document.querySelector('#search-form');\nconst $loadMore = document.querySelector('#load-more');\nconst $loadText = document.querySelector('#load-text');\nlet parsedWords = '';\nlet page = 1;\n\n$searchForm.onsubmit = async event => {\n  try {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const data = new FormData(event.target);\n    const search = data.get('search');\n    parsedWords = search.trim().split(' ').join('+');\n\n    if (!parsedWords) {\n      iziToast.error({\n        message: 'Please enter a search term!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    render.showLoading();\n    const images = await api.search(parsedWords, page);\n\n    if (images.length) { \n      render.renderImages(images);\n      hiddenButtonLoadMore(false);\n    }\n\n    if (!images.length) {\n      iziToast.error({ \n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight'\n      });\n\n      render.clearLoading();\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\n\n\n$loadMore.onclick = async () => {\n  try {\n    hiddenButtonLoadMore(true);\n    $loadText.hidden = false\n\n    page += 1;\n    const images = await api.search(parsedWords, page);\n    if (images) { \n      render.renderImages(images, false);\n      hiddenButtonLoadMore(false);\n      $loadMore.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\n    }\n\n    if (!images.length) {\n      iziToast.info({ \n        message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n        position: 'topRight'\n      });\n    }\n\n  } catch (error) {\n    console.error(error);\n  } finally {\n    $loadText.hidden = true\n  }\n}\n\nfunction hiddenButtonLoadMore(bool = false) {\n  $loadMore.hidden = bool;\n}"],"names":["baseUrl","key","imageType","safesearch","orientation","perPage","search","words","page","params","data","axios","error","$gallery","showLoading","clearLoading","renderImages","images","isNew","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","$searchForm","$loadMore","$loadText","parsedWords","event","render.showLoading","api.search","render.renderImages","hiddenButtonLoadMore","render.clearLoading","bool"],"mappings":"owBAIA,MAAMA,EAAU,2BACVC,EAAM,qCACNC,EAAY,QACZC,EAAa,GACbC,EAAc,aACdC,EAAU,aAEHC,EAAS,MAAOC,EAAOC,EAAO,IAAM,CAC/C,GAAI,CACF,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAAR,EACA,WAAAE,EACA,YAAAC,EACA,EAAGG,EACH,WAAYL,EACZ,SAAUG,EACV,KAAMG,CACZ,CAAK,EAEK,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGX,CAAO,IAAIS,EAAO,SAAQ,CAAE,EAAE,EAElE,OAAOC,EAAK,IACb,OAAQE,EAAO,CACd,QAAQ,MAAM,gCAAgCL,CAAK,IAAKK,CAAK,CACjE,CACA,ECxBMC,EAAW,SAAS,cAAc,UAAU,EAErCC,EAAc,IAAM,CAC/BD,EAAS,UAAY,gCACvB,EAEaE,EAAe,IAAM,CAChCF,EAAS,UAAY,EACvB,EAEaG,EAAe,CAACC,EAAQC,EAAQ,KAAS,CAGpD,GAFIA,IAAOL,EAAS,UAAY,IAE5BI,EAAO,SAAW,EAAG,CACvBE,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAChB,CAAK,EACD,MACJ,CAEE,MAAMC,EAASH,EACZ,IACC,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAAgB;AAAA;AAAA,mBAEjEL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,sCAGVC,CAAK;AAAA,sCACLC,CAAK;AAAA,yCACFC,CAAQ;AAAA,0CACPC,CAAS;AAAA;AAAA;AAAA,KAInD,EACK,KAAK,EAAE,EAEVd,EAAS,WAAaO,EAEL,IAAIQ,EAAe,YAAY,EACvC,QAAS,CACpB,EC7CMC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAY,SAAS,cAAc,YAAY,EACrD,IAAIC,EAAc,GACdxB,EAAO,EAEXqB,EAAY,SAAW,MAAMI,GAAS,CACpC,GAAI,CAQF,GAPAA,EAAM,gBAAiB,EACvBA,EAAM,eAAgB,EAItBD,EAFa,IAAI,SAASC,EAAM,MAAM,EAClB,IAAI,QAAQ,EACX,KAAM,EAAC,MAAM,GAAG,EAAE,KAAK,GAAG,EAE3C,CAACD,EAAa,CAChB,SAAS,MAAM,CACb,QAAS,8BACT,SAAU,UAClB,CAAO,EACD,MACN,CAEIE,EAAoB,EACpB,MAAMjB,EAAS,MAAMkB,EAAWH,EAAaxB,CAAI,EAE7CS,EAAO,SACTmB,EAAoBnB,CAAM,EAC1BoB,EAAqB,EAAK,GAGvBpB,EAAO,SACV,SAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAClB,CAAO,EAEDqB,EAAqB,EAExB,OAAQ1B,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,CACA,EAGAkB,EAAU,QAAU,SAAY,CAC9B,GAAI,CACFO,EAAqB,EAAI,EACzBN,EAAU,OAAS,GAEnBvB,GAAQ,EACR,MAAMS,EAAS,MAAMkB,EAAWH,EAAaxB,CAAI,EAC7CS,IACFmB,EAAoBnB,EAAQ,EAAK,EACjCoB,EAAqB,EAAK,EAC1BP,EAAU,eAAe,CAAE,SAAU,SAAU,MAAO,MAAO,GAG1Db,EAAO,QACV,SAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,CAGJ,OAAQL,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACRmB,EAAU,OAAS,EACvB,CACA,EAEA,SAASM,EAAqBE,EAAO,GAAO,CAC1CT,EAAU,OAASS,CACrB"}