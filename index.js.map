{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = 'https://pixabay.com/api/';\nconst key = '46672316-334fc4a904d955c3d11f52bb4';\nconst imageType = 'photo';\nconst safesearch = true;\nconst orientation = 'horizontal';\nconst perPage = 15;\n\nexport const search = async (words, page = 1) => {\n  try {\n    const params = new URLSearchParams({\n      key,\n      safesearch,\n      orientation,\n      q: words,\n      image_type: imageType,\n      per_page: perPage,\n      page: page,\n    });\n\n    const { data } = await axios.get(`${baseUrl}?${params.toString()}`);\n    return data;\n  } catch (error) {\n    console.error(`Search failed with words: \"${words}\"`, error);\n  }\n};\n\nexport function isHasNextPage(totalHits, currentPage) {\n  const totalPages = Math.ceil(totalHits / perPage)\n  return currentPage !== totalPages;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst $gallery = document.querySelector('.gallery');\nconst $loadText = document.querySelector('#load-text');\nconst $loadMore = document.querySelector('#load-more');\n\nexport const showLoading = () => {\n  $loadMore.classList.add('loading')\n};\n\nexport const clearLoading = () => {\n  $loadMore.classList.remove('loading')\n};\n\nexport const renderImages = (images) => {\n  if (!images || images.length === 0) {\n    iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    render.clearLoading();\n    hiddenButtonLoadMore(true);\n    return;\n  }\n\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <div class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\"/>\n        </a>\n        <div class=\"gallery-info\">\n          <p><strong>Likes</strong> ${likes}</p>\n          <p><strong>Views</strong> ${views}</p>\n          <p><strong>Comments</strong> ${comments}</p>\n          <p><strong>Downloads</strong> ${downloads}</p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n\n  $gallery.innerHTML += markup;\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  $gallery.innerHTML = '';\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport * as api from './js/pixabay-api';\nimport * as render from './js/render-functions';\n\nconst $searchForm = document.querySelector('#search-form');\nconst $loadMore = document.querySelector('#load-more');\n\nlet parsedWords = '';\nlet page = 1;\n\n$searchForm.onsubmit = async event => {\n  try {\n    event.stopPropagation();\n    event.preventDefault();\n\n    page = 1;\n    const data = new FormData(event.target);\n    const search = data.get('search');\n    parsedWords = search.trim().split(' ').join('+');\n\n    if (!parsedWords) {\n      iziToast.error({\n        message: 'Please enter a search term!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    render.clearGallery();\n    render.showLoading();\n    const { hits } = await api.search(parsedWords, page);\n\n    if (hits?.length) { \n      render.renderImages(hits);\n      $loadMore.hidden = false;\n    } else {\n      iziToast.error({ \n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight'\n      });\n    }\n  } catch (error) {\n    console.error(error);\n  } finally {\n    render.clearLoading();\n  }\n};\n\n\n$loadMore.onclick = async () => {\n  try {\n    render.showLoading();\n\n    page += 1;\n    const { hits, totalHits } = await api.search(parsedWords, page);\n    if (hits?.length) { \n      render.renderImages(hits);\n      $loadMore.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\n    }\n\n    if (!api.isHasNextPage(page, totalHits)) {\n      iziToast.info({ \n        message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n        position: 'topRight'\n      });\n      $loadMore.hidden = true;\n    }\n\n  } catch (error) {\n    console.error(error);\n  } finally {\n    render.clearLoading();\n  }\n}"],"names":["baseUrl","key","imageType","safesearch","orientation","perPage","search","words","page","params","data","axios","error","isHasNextPage","totalHits","currentPage","totalPages","$gallery","$loadMore","showLoading","clearLoading","renderImages","images","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","$searchForm","parsedWords","event","render.clearGallery","render.showLoading","hits","api.search","render.renderImages","render.clearLoading","api.isHasNextPage"],"mappings":"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"}